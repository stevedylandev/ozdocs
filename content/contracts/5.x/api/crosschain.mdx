---
title: "Crosschain"
description: "Smart contract crosschain utilities and implementations"
---

This directory contains contracts for sending and receiving cross chain messages that follows the ERC-7786 standard.

* [`ERC7786Recipient`](#ERC7786Recipient): generic ERC-7786 crosschain contract that receives messages from a trusted gateway

## Helpers

[`ERC7786Recipient`](#ERC7786Recipient)

<a id="ERC7786Recipient"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `ERC7786Recipient` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v5.4.0/contracts/crosschain/ERC7786Recipient.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import "@openzeppelin/contracts/crosschain/ERC7786Recipient.sol";
```

Base implementation of an ERC-7786 compliant cross-chain message receiver.

This abstract contract exposes the `receiveMessage` function that is used for communication with (one or multiple)
destination gateways. This contract leaves two functions unimplemented:

* [`ERC7786Recipient._isAuthorizedGateway`](#ERC7786Recipient-_isAuthorizedGateway-address-bytes-), an internal getter used to verify whether an address is recognised by the contract as a
valid ERC-7786 destination gateway. One or multiple gateway can be supported. Note that any malicious address for
which this function returns true would be able to impersonate any account on any other chain sending any message.

* [`ERC7786Recipient._processMessage`](#ERC7786Recipient-_processMessage-address-bytes32-bytes-bytes-), the internal function that will be called with any message that has been validated.

This contract implements replay protection, meaning that if two messages are received from the same gateway with the
same `receiveId`, then the second one will NOT be executed, regardless of the result of [`ERC7786Recipient._isAuthorizedGateway`](#ERC7786Recipient-_isAuthorizedGateway-address-bytes-).

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Functions</h3>
<div className="font-mono">
- [receiveMessage(receiveId, sender, payload)](#ERC7786Recipient-receiveMessage-bytes32-bytes-bytes-)
- [_isAuthorizedGateway(gateway, sender)](#ERC7786Recipient-_isAuthorizedGateway-address-bytes-)
- [_processMessage(gateway, receiveId, sender, payload)](#ERC7786Recipient-_processMessage-address-bytes32-bytes-bytes-)
#### IERC7786Recipient [!toc]
</div>
</div>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Errors</h3>
<div className="font-mono">
- [ERC7786RecipientUnauthorizedGateway(gateway, sender)](#ERC7786Recipient-ERC7786RecipientUnauthorizedGateway-address-bytes-)
- [ERC7786RecipientMessageAlreadyProcessed(gateway, receiveId)](#ERC7786Recipient-ERC7786RecipientMessageAlreadyProcessed-address-bytes32-)
#### IERC7786Recipient [!toc]
</div>
</div>

<a id="ERC7786Recipient-receiveMessage-bytes32-bytes-bytes-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">receiveMessage(bytes32 receiveId, bytes sender, bytes payload) → bytes4</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">external</p>
<a className="peer" data-card href="ERC7786Recipient-receiveMessage-bytes32-bytes-bytes-">#</a>
</div>
</div>
<div className="px-4">

Endpoint for receiving cross-chain message.

This function may be called directly by the gateway.

</div>
</div>

<a id="ERC7786Recipient-_isAuthorizedGateway-address-bytes-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">_isAuthorizedGateway(address gateway, bytes sender) → bool</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="ERC7786Recipient-_isAuthorizedGateway-address-bytes-">#</a>
</div>
</div>
<div className="px-4">

Virtual getter that returns whether an address is a valid ERC-7786 gateway for a given sender.

The `sender` parameter is an interoperable address that include the source chain. The chain part can be
extracted using the [`InteroperableAddress`](utils#InteroperableAddress) library to selectively authorize gateways based on the origin chain
of a message.

</div>
</div>

<a id="ERC7786Recipient-_processMessage-address-bytes32-bytes-bytes-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">_processMessage(address gateway, bytes32 receiveId, bytes sender, bytes payload)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="ERC7786Recipient-_processMessage-address-bytes32-bytes-bytes-">#</a>
</div>
</div>
<div className="px-4">

Virtual function that should contain the logic to execute when a cross-chain message is received.

</div>
</div>

<a id="ERC7786Recipient-ERC7786RecipientUnauthorizedGateway-address-bytes-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">ERC7786RecipientUnauthorizedGateway(address gateway, bytes sender)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">error</p>
<a className="peer" data-card href="ERC7786Recipient-ERC7786RecipientUnauthorizedGateway-address-bytes-">#</a>
</div>
</div>
<div className="px-4">

</div>
</div>

<a id="ERC7786Recipient-ERC7786RecipientMessageAlreadyProcessed-address-bytes32-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">ERC7786RecipientMessageAlreadyProcessed(address gateway, bytes32 receiveId)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">error</p>
<a className="peer" data-card href="ERC7786Recipient-ERC7786RecipientMessageAlreadyProcessed-address-bytes32-">#</a>
</div>
</div>
<div className="px-4">

</div>
</div>

