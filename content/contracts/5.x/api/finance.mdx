---
title: "Finance"
description: "Smart contract finance utilities and implementations"
---

This directory includes primitives for financial systems:

* [`VestingWallet`](#VestingWallet) handles the vesting of Ether and ERC-20 tokens for a given beneficiary. Custody of multiple tokens can
  be given to this contract, which will release the token to the beneficiary following a given, customizable, vesting
  schedule.

## Contracts

[`VestingWallet`](#VestingWallet)

<a id="VestingWallet"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `VestingWallet` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v5.4.0/contracts/finance/VestingWallet.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import "@openzeppelin/contracts/finance/VestingWallet.sol";
```

A vesting wallet is an ownable contract that can receive native currency and ERC-20 tokens, and release these
assets to the wallet owner, also referred to as "beneficiary", according to a vesting schedule.

Any assets transferred to this contract will follow the vesting schedule as if they were locked from the beginning.
Consequently, if the vesting has already started, any amount of tokens sent to this contract will (at least partly)
be immediately releasable.

By setting the duration to 0, one can configure this contract to behave like an asset timelock that holds tokens for
a beneficiary until a specified time.

<Callout>
Since the wallet is [`Ownable`](access#Ownable), and ownership can be transferred, it is possible to sell unvested tokens.
Preventing this in a smart contract is difficult, considering that: 1) a beneficiary address could be a
counterfactually deployed contract, 2) there is likely to be a migration path for EOAs to become contracts in the
near future.
</Callout>

<Callout>
When using this contract with any token whose balance is adjusted automatically (i.e. a rebase token), make
sure to account the supply/balance adjustment in the vesting schedule to ensure the vested amount is as intended.
</Callout>

<Callout>
Chains with support for native ERC20s may allow the vesting wallet to withdraw the underlying asset as both an
ERC20 and as native currency. For example, if chain C supports token A and the wallet gets deposited 100 A, then
at 50% of the vesting period, the beneficiary can withdraw 50 A as ERC20 and 25 A as native currency (totaling 75 A).
Consider disabling one of the withdrawal methods.
</Callout>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Functions</h3>
<div className="font-mono">
- [constructor(beneficiary, startTimestamp, durationSeconds)](#VestingWallet-constructor-address-uint64-uint64-)
- [receive()](#VestingWallet-receive--)
- [start()](#VestingWallet-start--)
- [duration()](#VestingWallet-duration--)
- [end()](#VestingWallet-end--)
- [released()](#VestingWallet-released--)
- [released(token)](#VestingWallet-released-address-)
- [releasable()](#VestingWallet-releasable--)
- [releasable(token)](#VestingWallet-releasable-address-)
- [release()](#VestingWallet-release--)
- [release(token)](#VestingWallet-release-address-)
- [vestedAmount(timestamp)](#VestingWallet-vestedAmount-uint64-)
- [vestedAmount(token, timestamp)](#VestingWallet-vestedAmount-address-uint64-)
- [_vestingSchedule(totalAllocation, timestamp)](#VestingWallet-_vestingSchedule-uint256-uint64-)
#### Ownable [!toc]
- [owner()](#Ownable-owner--)
- [_checkOwner()](#Ownable-_checkOwner--)
- [renounceOwnership()](#Ownable-renounceOwnership--)
- [transferOwnership(newOwner)](#Ownable-transferOwnership-address-)
- [_transferOwnership(newOwner)](#Ownable-_transferOwnership-address-)
</div>
</div>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Events</h3>
<div className="font-mono">
- [EtherReleased(amount)](#VestingWallet-EtherReleased-uint256-)
- [ERC20Released(token, amount)](#VestingWallet-ERC20Released-address-uint256-)
#### Ownable [!toc]
- [OwnershipTransferred(previousOwner, newOwner)](#Ownable-OwnershipTransferred-address-address-)
</div>
</div>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Errors</h3>
<div className="font-mono">
#### Ownable [!toc]
- [OwnableUnauthorizedAccount(account)](#Ownable-OwnableUnauthorizedAccount-address-)
- [OwnableInvalidOwner(owner)](#Ownable-OwnableInvalidOwner-address-)
</div>
</div>

<a id="VestingWallet-constructor-address-uint64-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">constructor(address beneficiary, uint64 startTimestamp, uint64 durationSeconds)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-constructor-address-uint64-uint64-">#</a>
</div>
</div>
<div className="px-4">

Sets the beneficiary (owner), the start timestamp and the vesting duration (in seconds) of the vesting
wallet.

</div>
</div>

<a id="VestingWallet-receive--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">receive()</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">external</p>
<a className="peer" data-card href="VestingWallet-receive--">#</a>
</div>
</div>
<div className="px-4">

The contract should be able to receive Eth.

</div>
</div>

<a id="VestingWallet-start--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">start() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-start--">#</a>
</div>
</div>
<div className="px-4">

Getter for the start timestamp.

</div>
</div>

<a id="VestingWallet-duration--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">duration() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-duration--">#</a>
</div>
</div>
<div className="px-4">

Getter for the vesting duration.

</div>
</div>

<a id="VestingWallet-end--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">end() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-end--">#</a>
</div>
</div>
<div className="px-4">

Getter for the end timestamp.

</div>
</div>

<a id="VestingWallet-released--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">released() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-released--">#</a>
</div>
</div>
<div className="px-4">

Amount of eth already released

</div>
</div>

<a id="VestingWallet-released-address-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">released(address token) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-released-address-">#</a>
</div>
</div>
<div className="px-4">

Amount of token already released

</div>
</div>

<a id="VestingWallet-releasable--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">releasable() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-releasable--">#</a>
</div>
</div>
<div className="px-4">

Getter for the amount of releasable eth.

</div>
</div>

<a id="VestingWallet-releasable-address-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">releasable(address token) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-releasable-address-">#</a>
</div>
</div>
<div className="px-4">

Getter for the amount of releasable `token` tokens. `token` should be the address of an
[`IERC20`](token/ERC20#IERC20) contract.

</div>
</div>

<a id="VestingWallet-release--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">release()</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-release--">#</a>
</div>
</div>
<div className="px-4">

Release the native tokens (ether) that have already vested.

Emits a [`VestingWallet.EtherReleased`](#VestingWallet-EtherReleased-uint256-) event.

</div>
</div>

<a id="VestingWallet-release-address-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">release(address token)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-release-address-">#</a>
</div>
</div>
<div className="px-4">

Release the tokens that have already vested.

Emits a [`VestingWallet.ERC20Released`](#VestingWallet-ERC20Released-address-uint256-) event.

</div>
</div>

<a id="VestingWallet-vestedAmount-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">vestedAmount(uint64 timestamp) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-vestedAmount-uint64-">#</a>
</div>
</div>
<div className="px-4">

Calculates the amount of ether that has already vested. Default implementation is a linear vesting curve.

</div>
</div>

<a id="VestingWallet-vestedAmount-address-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">vestedAmount(address token, uint64 timestamp) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWallet-vestedAmount-address-uint64-">#</a>
</div>
</div>
<div className="px-4">

Calculates the amount of tokens that has already vested. Default implementation is a linear vesting curve.

</div>
</div>

<a id="VestingWallet-_vestingSchedule-uint256-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">_vestingSchedule(uint256 totalAllocation, uint64 timestamp) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="VestingWallet-_vestingSchedule-uint256-uint64-">#</a>
</div>
</div>
<div className="px-4">

Virtual implementation of the vesting formula. This returns the amount vested, as a function of time, for
an asset given its total historical allocation.

</div>
</div>

<a id="VestingWallet-EtherReleased-uint256-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">EtherReleased(uint256 amount)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">event</p>
<a className="peer" data-card href="VestingWallet-EtherReleased-uint256-">#</a>
</div>
</div>

<div className="px-4">

</div>
</div>
<a id="VestingWallet-ERC20Released-address-uint256-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">ERC20Released(address indexed token, uint256 amount)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">event</p>
<a className="peer" data-card href="VestingWallet-ERC20Released-address-uint256-">#</a>
</div>
</div>

<div className="px-4">

</div>
</div>

<a id="VestingWalletCliff"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `VestingWalletCliff` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v5.4.0/contracts/finance/VestingWalletCliff.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import "@openzeppelin/contracts/finance/VestingWalletCliff.sol";
```

Extension of [`VestingWallet`](#VestingWallet) that adds a cliff to the vesting schedule.

_Available since v5.1._

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Functions</h3>
<div className="font-mono">
- [constructor(cliffSeconds)](#VestingWalletCliff-constructor-uint64-)
- [cliff()](#VestingWalletCliff-cliff--)
- [_vestingSchedule(totalAllocation, timestamp)](#VestingWalletCliff-_vestingSchedule-uint256-uint64-)
#### VestingWallet [!toc]
- [receive()](#VestingWallet-receive--)
- [start()](#VestingWallet-start--)
- [duration()](#VestingWallet-duration--)
- [end()](#VestingWallet-end--)
- [released()](#VestingWallet-released--)
- [released(token)](#VestingWallet-released-address-)
- [releasable()](#VestingWallet-releasable--)
- [releasable(token)](#VestingWallet-releasable-address-)
- [release()](#VestingWallet-release--)
- [release(token)](#VestingWallet-release-address-)
- [vestedAmount(timestamp)](#VestingWallet-vestedAmount-uint64-)
- [vestedAmount(token, timestamp)](#VestingWallet-vestedAmount-address-uint64-)
#### Ownable [!toc]
- [owner()](#Ownable-owner--)
- [_checkOwner()](#Ownable-_checkOwner--)
- [renounceOwnership()](#Ownable-renounceOwnership--)
- [transferOwnership(newOwner)](#Ownable-transferOwnership-address-)
- [_transferOwnership(newOwner)](#Ownable-_transferOwnership-address-)
</div>
</div>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Events</h3>
<div className="font-mono">
#### VestingWallet [!toc]
- [EtherReleased(amount)](#VestingWallet-EtherReleased-uint256-)
- [ERC20Released(token, amount)](#VestingWallet-ERC20Released-address-uint256-)
#### Ownable [!toc]
- [OwnershipTransferred(previousOwner, newOwner)](#Ownable-OwnershipTransferred-address-address-)
</div>
</div>

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Errors</h3>
<div className="font-mono">
- [InvalidCliffDuration(cliffSeconds, durationSeconds)](#VestingWalletCliff-InvalidCliffDuration-uint64-uint64-)
#### VestingWallet [!toc]
#### Ownable [!toc]
- [OwnableUnauthorizedAccount(account)](#Ownable-OwnableUnauthorizedAccount-address-)
- [OwnableInvalidOwner(owner)](#Ownable-OwnableInvalidOwner-address-)
</div>
</div>

<a id="VestingWalletCliff-constructor-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">constructor(uint64 cliffSeconds)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="VestingWalletCliff-constructor-uint64-">#</a>
</div>
</div>
<div className="px-4">

Set the duration of the cliff, in seconds. The cliff starts vesting schedule (see [`VestingWallet`](#VestingWallet)'s
constructor) and ends `cliffSeconds` later.

</div>
</div>

<a id="VestingWalletCliff-cliff--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">cliff() → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">public</p>
<a className="peer" data-card href="VestingWalletCliff-cliff--">#</a>
</div>
</div>
<div className="px-4">

Getter for the cliff timestamp.

</div>
</div>

<a id="VestingWalletCliff-_vestingSchedule-uint256-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">_vestingSchedule(uint256 totalAllocation, uint64 timestamp) → uint256</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="VestingWalletCliff-_vestingSchedule-uint256-uint64-">#</a>
</div>
</div>
<div className="px-4">

Virtual implementation of the vesting formula. This returns the amount vested, as a function of time, for
an asset given its total historical allocation. Returns 0 if the [`VestingWalletCliff.cliff`](#VestingWalletCliff-cliff--) timestamp is not met.

<Callout type="warn">
The cliff not only makes the schedule return 0, but it also ignores every possible side
effect from calling the inherited implementation (i.e. `super._vestingSchedule`). Carefully consider
this caveat if the overridden implementation of this function has any (e.g. writing to memory or reverting).
</Callout>

</div>
</div>

<a id="VestingWalletCliff-InvalidCliffDuration-uint64-uint64-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">InvalidCliffDuration(uint64 cliffSeconds, uint64 durationSeconds)</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">error</p>
<a className="peer" data-card href="VestingWalletCliff-InvalidCliffDuration-uint64-uint64-">#</a>
</div>
</div>
<div className="px-4">

The specified cliff duration is larger than the vesting duration.

</div>
</div>

