---
title: Ownable API
---

This module provides the full Ownable module API.

<Callout type='info'>
For an overview of the module, read the [Ownable guide](../ownable).
</Callout>

## Ownable [toc] [#Ownable]
<APIGithubLinkHeader
    moduleName="Ownable"
    link={`https://github.com/OpenZeppelin/compact-contracts/blob/main/contracts/src/access/Ownable.compact`}
/>

```ts
import "./compact-contracts/node_modules/@openzeppelin-compact/contracts/src/access/Ownable";
```

---

### Ledger [toc] [#Ownable-Ledger]
### Ledger [!toc] [#Ownable-Ledger]

#### _owner [toc] [#Ownable-_owner]
#### [!toc] [#Ownable-_owner]
<APIItemCompact
  circuitSig='_owner: Either<ZswapCoinPublicKey, ContractAddress>'
  kind="ledger"
  id="Ownable-_owner"
>
  Either a `ZswapCoinPublicKey` or `ContractAddress` representing the owner.
</APIItemCompact>

### Witnesses [toc] [#Ownable-Witnesses]
### Witnesses [!toc] [#Ownable-Witnesses]

None.

### Circuits [toc] [#Ownable-Circuits]
### Circuits [!toc] [#Ownable-Circuits]

#### initialize [toc] [#Ownable-initialize]
#### [!toc] [#Ownable-initialize]
<APIItemCompact
  circuitSig='initialize(initialOwner: Either<ZswapCoinPublicKey, ContractAddress>) → []'
  kind="circuit"
  complexity="k=10, rows=258"
  modulePrefix="Ownable"
>
  Initializes the contract by setting the `initialOwner`.
  This must be called in the contract’s constructor.

  Requirements:

  * Contract is not already initialized.
  * `initialOwner` is not a ContractAddress.
  * `initialOwner` is not the zero address.
</APIItemCompact>

#### owner [toc] [#Ownable-owner]
#### [!toc] [#Ownable-owner]
<APIItemCompact
  circuitSig='owner() → Either<ZswapCoinPublicKey, ContractAddress>'
  kind="circuit"
  complexity="k=10, rows=84"
  modulePrefix="Ownable"
>
  Returns the current contract owner.

  Requirements:

  * Contract is initialized.
</APIItemCompact>

#### transferOwnership [toc] [#Ownable-transferOwnership]
#### [!toc] [#Ownable-transferOwnership]
<APIItemCompact
  circuitSig='transferOwnership(newOwner: Either<ZswapCoinPublicKey, ContractAddress>) → []'
  kind="circuit"
  complexity="k=10, rows=338"
  modulePrefix="Ownable"
>
  Transfers ownership of the contract to `newOwner`.

  <Callout type='info'>
    Ownership transfers to contract addresses are currently disallowed until contract-to-contract interactions are supported in Compact.
    This restriction prevents permanently disabling access to a circuit.
  </Callout>

  Requirements:

  * Contract is initialized.
  * The caller is the current contract owner.
  * `newOwner` is not a ContractAddress.
  * `newOwner` is not the zero address.
</APIItemCompact>

#### _unsafeTransferOwnership [toc] [#Ownable-_unsafeTransferOwnership]
#### [!toc] [#Ownable-_unsafeTransferOwnership]
<APIItemCompact
  circuitSig='_unsafeTransferOwnership(newOwner: Either<ZswapCoinPublicKey, ContractAddress>) → []'
  kind="circuit"
  complexity="k=10, rows=335"
  modulePrefix="Ownable"
>
  Unsafe variant of [`transferOwnership`](#Ownable-transferOwnership).

  <Callout type='warn'>
    Ownership transfers to contract addresses are considered unsafe because contract-to-contract calls are not currently supported.
    Ownership privileges sent to a contract address may become uncallable.
    Once contract-to-contract calls are supported, this circuit may be deprecated.
  </Callout>

  Requirements:

  * Contract is initialized.
  * The caller is the current contract owner.
  * `newOwner` is not the zero address.
</APIItemCompact>

#### renounceOwnership [toc] [#Ownable-renounceOwnership]
#### [!toc] [#Ownable-renounceOwnership]
<APIItemCompact
  circuitSig='renounceOwnership() → []'
  kind="circuit"
  complexity="k=10, rows=124"
  modulePrefix="Ownable"
>
  Leaves the contract without an owner.
  It will not be possible to call [`assertOnlyOwner`](#Ownable-assertOnlyOwner) circuits anymore.
  Can only be called by the current owner.

  Requirements:

  * Contract is initialized.
  * The caller is the current contract owner.
</APIItemCompact>

#### assertOnlyOwner [toc] [#Ownable-assertOnlyOwner]
#### [!toc] [#Ownable-assertOnlyOwner]
<APIItemCompact
  circuitSig='assertOnlyOwner() → []'
  kind="circuit"
  complexity="k=10, rows=115"
  modulePrefix="Ownable"
>
  Throws if called by any account other than the owner.
  Use this to restrict access of specific circuits to the owner.

  Requirements:

  * Contract is initialized.
  * The caller is the current contract owner.
</APIItemCompact>

#### _transferOwnership [toc] [#Ownable-_transferOwnership]
#### [!toc] [#Ownable-_transferOwnership]
<APIItemCompact
  circuitSig='_transferOwnership(newOwner: Either<ZswapCoinPublicKey, ContractAddress>) → []'
  kind="circuit"
  complexity="k=10, rows=219"
  modulePrefix="Ownable"
>
  Transfers ownership of the contract to a `newOwner` without enforcing permission checks on the caller.

  <Callout type='info'>
    Ownership transfers to contract addresses are currently disallowed until contract-to-contract interactions are supported in Compact.
    This restriction prevents permanently disabling access to a circuit.
  </Callout>

  Requirements:

  * Contract is initialized.
  * `newOwner` is not a ContractAddress.
</APIItemCompact>

#### _unsafeUncheckedTransferOwnership [toc] [#Ownable-_unsafeUncheckedTransferOwnership]
#### [!toc] [#Ownable-_unsafeUncheckedTransferOwnership]
<APIItemCompact
  circuitSig='_unsafeUncheckedTransferOwnership(newOwner: Either<ZswapCoinPublicKey, ContractAddress>) → []'
  kind="circuit"
  complexity="k=10, rows=216"
  modulePrefix="Ownable"
>
  Unsafe variant of [`_transferOwnership`](#Ownable-_transferOwnership).

  <Callout type='warn'>
    Ownership transfers to contract addresses are considered unsafe because contract-to-contract calls are not currently supported.
    Ownership privileges sent to a contract address may become uncallable.
    Once contract-to-contract calls are supported, this circuit may be deprecated.
  </Callout>

  Requirements:

  * Contract is initialized.
</APIItemCompact>

---

## ZOwnablePK [toc] [#ZOwnablePK]
<APIGithubLinkHeader
    moduleName="ZOwnablePK"
    link={`https://github.com/OpenZeppelin/compact-contracts/blob/main/contracts/src/access/ZOwnablePK.compact`}
/>

```ts
import "./compact-contracts/node_modules/@openzeppelin-compact/contracts/src/access/ZOwnablePK";
```

---

### Ledger [toc] [#ZOwnablePK-ledger]
### Ledger [!toc] [#ZOwnablePK-ledger]

#### _ownerCommitment [toc] [#ZOwnablePK-_ownerCommitment]
#### [!toc] [#ZOwnablePK-_ownerCommitment]
<APIItemCompact
  circuitSig='_ownerCommitment: Bytes<32>'
  kind="ledger"
  id="ZOwnablePK-_ownerCommitment"
>
  Stores the current hashed commitment representing the owner.
  This commitment is derived from the public identifier (e.g., `SHA256(pk, nonce)`),
  the `instanceSalt`, the transfer `counter`, and a domain separator.

  A commitment of `default<Bytes<32>>` (i.e. zero) indicates the contract is unowned.
</APIItemCompact>

#### _counter [toc] [#ZOwnablePK-_counter]
#### [!toc] [#ZOwnablePK-_counter]
<APIItemCompact
  circuitSig='_counter: Counter'
  kind="ledger"
  id="ZOwnablePK-_counter"
>
  Internal transfer counter used to prevent commitment reuse.

  Increments by 1 on every successful ownership transfer.
  Combined with `id` and `instanceSalt` to compute unique owner commitments over time.
</APIItemCompact>

#### _instanceSalt [toc] [#ZOwnablePK-_instanceSalt]
#### [!toc] [#ZOwnablePK-_instanceSalt]
<APIItemCompact
  circuitSig='_instanceSalt: Bytes<32>'
  kind="sealed ledger"
  id="ZOwnablePK-_instanceSalt"
>
  A per-instance value provided at initialization used to namespace commitments for this contract instance.

  This salt prevents commitment collisions across contracts that might otherwise use the same owner identifiers or domain parameters.
  It is immutable after initialization.
</APIItemCompact>

### Witnesses [toc] [#ZOwnablePK-witnesses]
### Witnesses [!toc] [#ZOwnablePK-witnesses]

#### wit_secretNonce [toc] [#ZOwnablePK-wit_secretNonce]
#### [!toc] [#ZOwnablePK-wit_secretNonce]
<APIItemCompact
  circuitSig='wit_secretNonce(): Bytes<32>'
  kind="witness"
  modulePrefix="ZOwnablePK"
>
  A private per-user nonce used in deriving the shielded owner identifier.

  Combined with the user's public key as `SHA256(pk, nonce)` to produce an obfuscated, unlinkable identity commitment.
  Users are encouraged to rotate this value on ownership changes.
</APIItemCompact>

### Circuits [toc] [#ZOwnablePK-circuits]
### Circuits [!toc] [#ZOwnablePK-circuits]

#### initialize [toc] [#ZOwnablePK-initialize]
#### [!toc] [#ZOwnablePK-initialize]
<APIItemCompact
  circuitSig='initialize(ownerId: Bytes<32>, instanceSalt: Bytes<32>): []'
  kind="circuit"
  complexity="k=14, rows=14933"
  modulePrefix="ZOwnablePK"
>
  Initializes the contract by setting the initial owner via `ownerId`
  and storing the `instanceSalt` that acts as a privacy additive
  for preventing duplicate commitments among other contracts implementing ZOwnablePK.

  <Callout>
    The `ownerId` must be calculated prior to contract deployment using the SHA256 hashing algorithm.
    Using any other algorithm will result in a permanent loss of contract access.
    See [_computeOwnerId](#ZOwnablePK-_computeOwnerId).
  </Callout>
</APIItemCompact>

#### owner [toc] [#ZOwnablePK-owner]
#### [!toc] [#ZOwnablePK-owner]
<APIItemCompact
  circuitSig='owner(): Bytes<32>'
  kind="circuit"
  complexity="k=10, rows=57"
  modulePrefix="ZOwnablePK"
>
  Returns the current commitment representing the contract owner.
  The full commitment is: `SHA256(SHA256(pk, nonce), instanceSalt, counter, domain)`.
</APIItemCompact>

#### transferOwnership [toc] [#ZOwnablePK-transferOwnership]
#### [!toc] [#ZOwnablePK-transferOwnership]
<APIItemCompact
  circuitSig='transferOwnership(newOwnerId: Bytes<32>): []'
  kind="circuit"
  complexity="k=16, rows=39240"
  modulePrefix="ZOwnablePK"
>
  Transfers ownership to `newOwnerId`.
  `newOwnerId` must be precalculated and given to the current owner off chain.

  <Callout>
    The caller must be the current owner and `newOwnerId` must not be empty.
  </Callout>
</APIItemCompact>

#### renounceOwnership [toc] [#ZOwnablePK-renounceOwnership]
#### [!toc] [#ZOwnablePK-renounceOwnership]
<APIItemCompact
  circuitSig='renounceOwnership(): []'
  kind="circuit"
  complexity="k=15, rows=24442"
  modulePrefix="ZOwnablePK"
>
  Leaves the contract without an owner.
  It will not be possible to call `assertOnlyOwner` circuits anymore.
  Can only be called by the current owner.
</APIItemCompact>

#### assertOnlyOwner [toc] [#ZOwnablePK-assertOnlyOwner]
#### [!toc] [#ZOwnablePK-assertOnlyOwner]
<APIItemCompact
  circuitSig='assertOnlyOwner(): []'
  kind="circuit"
  complexity="k=15, rows=24437"
  modulePrefix="ZOwnablePK"
>
  Throws if called by any account whose id hash `SHA256(pk, nonce)` does not match
  the stored owner commitment.
  Use this to only allow the owner to call specific circuits.
</APIItemCompact>

#### _computeOwnerCommitment [toc] [#ZOwnablePK-_computeOwnerCommitment]
#### [!toc] [#ZOwnablePK-_computeOwnerCommitment]
<APIItemCompact
  circuitSig='_computeOwnerCommitment(id: Bytes<32>, counter: Uint<64>): Bytes<32>'
  kind="circuit"
  complexity="k=14, rows=14853"
  modulePrefix="ZOwnablePK"
>
  Computes the owner commitment from the given `id` and `counter`.

  The commitment derivation follows:
  `commitment = SHA256(id, instanceSalt, counter, "ZOwnablePK:shield:")`

  Where:
  - `id`: The unique identifier `SHA256(pk, nonce)`.
  - `instanceSalt`: Per-deployment salt to prevent collisions.
  - `counter`: Incremented with each transfer for uniqueness.
  - Domain separator: `"ZOwnablePK:shield:"` padded to 32 bytes.
</APIItemCompact>

#### _computeOwnerId [toc] [#ZOwnablePK-_computeOwnerId]
#### [!toc] [#ZOwnablePK-_computeOwnerId]
<APIItemCompact
  circuitSig='_computeOwnerId(pk: Either<ZswapCoinPublicKey, ContractAddress>, nonce: Bytes<32>): Bytes<32>'
  kind="circuit"
  modulePrefix="ZOwnablePK"
>
  Computes the unique identifier (`id`) of the owner from their public key and a secret nonce.

  The ID derivation follows: `id = SHA256(pk, nonce)`

  <Callout>
    Currently only supports `ZswapCoinPublicKey`. Contract address owners are not yet supported.
    We recommend using an Air-Gapped Public Key for strongest security guarantees.
  </Callout>
</APIItemCompact>

#### _transferOwnership [toc] [#ZOwnablePK-_transferOwnership]
#### [!toc] [#ZOwnablePK-_transferOwnership]
<APIItemCompact
  circuitSig='_transferOwnership(newOwnerId: Bytes<32>): []'
  kind="circuit"
  complexity="k=14, rows=14823"
  modulePrefix="ZOwnablePK"
>
  Transfers ownership to owner id `newOwnerId` without enforcing permission checks on the caller.

  This is an internal function that increments the counter and updates the owner commitment.
</APIItemCompact>
