---
title: Account
description: Account
---

This crate provides components to implement account contracts that can be used for interacting with the network.

## Interfaces

<Callout>
Starting from version `3.x.x`, the interfaces are no longer part of the `openzeppelin_account` package.
</Callout>

### `++ISRC6++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/interfaces/src/account/accounts.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_interfaces::accounts::ISRC6;
```

Interface of the SRC6 Standard Account as defined in the [SNIP-6](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-6.md).

**[SRC5 ID](api/introspection.adoc#ISRC5)**

0x2ceccef7f994940b3962a6c67e0ba4fcd37df7d131417c604f91e03caecc1cd

**Functions**

* xref:#ISRC6-\\__execute__[`+__execute__(calls)+`]
* xref:#ISRC6-\\__validate__[`+__validate__(calls)+`]
* [`+is_valid_signature(hash, signature)+`](#`[.contract-item-name]#++is_valid_signature++#++(hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#)

#### Functions

#### `[.contract-item-name]#++__execute__++#++(calls: Array<Call>)++` [.item-kind]#external#

Executes the list of calls as a transaction after validation.

<Callout>
The `Call` struct is defined in [corelib](https://github.com/starkware-libs/cairo/blob/main/corelib/src/starknet/account.cairo#L3).
</Callout>

#### `[.contract-item-name]#++__validate__++#++(calls: Array<Call>) â†’ felt252++` [.item-kind]#external#

Validates a transaction before execution.

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++is_valid_signature++#++(hash: felt252, signature: Array<felt252>) â†’ felt252++` [.item-kind]#external#

Validates whether a signature is valid or not for the given message hash.

Returns the short string â€™VALID'` if valid, otherwise it reverts.

### `++ISRC9_V2++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/interfaces/src/account/src9.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_interfaces::src9::ISRC9_V2;
```

Interface of the SRC9 Standard as defined in the [SNIP-9](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-9.md).

**[SRC5 ID](api/introspection.adoc#ISRC5)**

0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872

**Functions**

* [`+execute_from_outside_v2(outside_execution, signature)+`](#`[.contract-item-name]#++execute_from_outside_v2++#++(outside_execution:-outsideexecution,-signature:-span<felt252>,)-â†’-array<span<felt252>>++`-[.item-kind]#external#)
* [`+is_valid_outside_execution_nonce(nonce)+`](#`[.contract-item-name]#++is_valid_outside_execution_nonce++#++(nonce:-felt252)-â†’-bool++`-[.item-kind]#external#)

#### Functions

#### `[.contract-item-name]#++execute_from_outside_v2++#++(outside_execution: OutsideExecution, signature: Span<felt252>,) â†’ Array<Span<felt252>>++` [.item-kind]#external#

Allows anyone to submit a transaction on behalf of the account as long as they have the relevant signatures.

This method allows reentrancy. A call to `\\__execute__` or `execute_from_outside_v2` can trigger
another nested transaction to `execute_from_outside_v2` thus the implementation MUST verify
that the provided `signature` matches the hash of `outside_execution` and that `nonce` was
not already used.

The implementation should expect version to be set to 2 in the domain separator.

Arguments:

* `outside_execution` - The parameters of the transaction to execute.
* `signature` - A valid signature on the [SNIP-12](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-12.md) message encoding of `outside_execution`.

#### `[.contract-item-name]#++is_valid_outside_execution_nonce++#++(nonce: felt252) â†’ bool++` [.item-kind]#external#

Get the status of a given nonce. `true` if the nonce is available to use.

## Core

### `++AccountComponent++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/account/src/account.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_account::AccountComponent;
```
Account component implementing [`ISRC6`](#`++isrc6++`-link:https://github.com/openzeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/interfaces/src/account/accounts.cairo[pass:[<svg-class="icon"><use-href="#github-icon"/></svg>],role=heading-link]) for signatures over the [Starknet curve](https://docs.starknet.io/architecture-and-concepts/cryptography/#stark-curve).

* [`+SRC6Impl+`](#AccountComponent-Embeddable-Impls-SRC6Impl)
* [`+DeclarerImpl+`](#AccountComponent-Embeddable-Impls-DeclarerImpl)
* [`+DeployableImpl+`](#AccountComponent-Embeddable-Impls-DeployableImpl)
* [`+PublicKeyImpl+`](#AccountComponent-Embeddable-Impls-PublicKeyImpl)
* [`+SRC6CamelOnlyImpl+`](#AccountComponent-Embeddable-Impls-SRC6CamelOnlyImpl)
* [`+PublicKeyCamelImpl+`](#AccountComponent-Embeddable-Impls-PublicKeyCamelImpl)
* [`+SRC5Impl+`](api/introspection.adoc#SRC5Component-Embeddable-Impls)

<a name="AccountComponent-Embeddable-Impls"></a>**Embeddable Implementations**

* xref:#AccountComponent-\\__execute__[`+__execute__(self, calls)+`]
* xref:#AccountComponent-\\__validate__[`+__validate__(self, calls)+`]
* [`+is_valid_signature(self, hash, signature)+`](#`[.contract-item-name]#++is_valid_signature++#++(self:-@contractstate,-hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#)

* xref:#AccountComponent-\\__validate_declare__[`+__validate_declare__(self, class_hash)+`]

* xref:#AccountComponent-\\__validate_deploy__[`+__validate_deploy__(self, hash, signature)+`]

* [`+get_public_key(self)+`](#`[.contract-item-name]#++get_public_key++#++(self:-@contractstate)++-â†’-felt252`-[.item-kind]#external#)
* [`+set_public_key(self, new_public_key, signature)+`](#`[.contract-item-name]#++set_public_key++#++(ref-self:-contractstate,-new_public_key:-felt252,-signature:-span<felt252>)++`-[.item-kind]#external#)

* [`+isValidSignature(self, hash, signature)+`](#`[.contract-item-name]#++isvalidsignature++#++(self:-@contractstate,-hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#)

* [`+getPublicKey(self)+`](#`[.contract-item-name]#++getpublickey++#++(self:-@contractstate)++-â†’-felt252`-[.item-kind]#external#)
* [`+setPublicKey(self, newPublicKey, signature)+`](#`[.contract-item-name]#++setpublickey++#++(ref-self:-contractstate,-newpublickey:-felt252,-signature:-span<felt252>)++`-[.item-kind]#external#)

**SRC5Impl**

* [`supports_interface(self, interface_id: felt252)`](api/introspection.adoc#ISRC5-supports_interface)

**Internal Implementations**

* [`+initializer(self, public_key)+`](#`[.contract-item-name]#++initializer++#++(ref-self:-componentstate,-public_key:-felt252)++`-[.item-kind]#internal#)
* [`+assert_only_self(self)+`](#`[.contract-item-name]#++assert_only_self++#++(self:-@componentstate)++`-[.item-kind]#internal#)
* [`+assert_valid_new_owner(self, current_owner, new_owner, signature)+`](#`[.contract-item-name]#++assert_valid_new_owner++#++(self:-@componentstate,-current_owner:-felt252,-new_owner:-felt252,-signature:-span<felt252>)++`-[.item-kind]#internal#)
* [`+validate_transaction(self)+`](#`[.contract-item-name]#++validate_transaction++#++(self:-@componentstate)++-â†’-felt252`-[.item-kind]#internal#)
* [`+_set_public_key(self, new_public_key)+`](#`[.contract-item-name]#++_set_public_key++#++(ref-self:-componentstate,-new_public_key:-felt252)++`-[.item-kind]#internal#)
* [`+_is_valid_signature(self, hash, signature)+`](#`[.contract-item-name]#++_is_valid_signature++#++(self:-@componentstate,-hash:-felt252,-signature:-span<felt252>)++-â†’-bool`-[.item-kind]#internal#)

**Events**

* [`+OwnerAdded(new_owner_guid)+`](#`[.contract-item-name]#++owneradded++#++(new_owner_guid:-felt252)++`-[.item-kind]#event#)
* [`+OwnerRemoved(removed_owner_guid)+`](#`[.contract-item-name]#++ownerremoved++#++(removed_owner_guid:-felt252)++`-[.item-kind]#event#)

#### Embeddable functions

#### `[.contract-item-name]#++__execute__++#++(self: @ContractState, calls: Array<Call>)++` [.item-kind]#external#

See xref:ISRC6-\\__execute__[ISRC6::\\__execute__].

#### `[.contract-item-name]#++__validate__++#++(self: @ContractState, calls: Array<Call>) â†’ felt252++` [.item-kind]#external#

See xref:ISRC6-\\__validate__[ISRC6::\\__validate__].

#### `[.contract-item-name]#++is_valid_signature++#++(self: @ContractState, hash: felt252, signature: Array<felt252>) â†’ felt252++` [.item-kind]#external#

See [ISRC6::is_valid_signature](#`[.contract-item-name]#++is_valid_signature++#++(hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#).

#### `[.contract-item-name]#++__validate_declare__++#++(self: @ContractState, class_hash: felt252) â†’ felt252++` [.item-kind]#external#

Validates a [`Declare` transaction](https://docs.starknet.io/architecture-and-concepts/network-architecture/transactions/#declare-transaction).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++__validate_deploy__++#++(self: @ContractState, class_hash: felt252, contract_address_salt: felt252, public_key: felt252) â†’ felt252++` [.item-kind]#external#

Validates a [`DeployAccount` transaction](https://docs.starknet.io/architecture-and-concepts/network-architecture/transactions/#deploy_account_transaction).
See [Counterfactual Deployments](/guides/deployment.adoc).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++get_public_key++#++(self: @ContractState)++ â†’ felt252` [.item-kind]#external#

Returns the current public key of the account.

#### `[.contract-item-name]#++set_public_key++#++(ref self: ContractState, new_public_key: felt252, signature: Span<felt252>)++` [.item-kind]#external#

Sets a new public key for the account. Only accessible by the account calling itself through `\\__execute__`.

Requirements:

* The caller must be the contract itself.
* The signature must be valid for the new owner.

Emits both an OwnerRemoved and an OwnerAdded event.

The message to be signed is computed in Cairo as follows:

```javascript
let message_hash = PoseidonTrait::new()
        .update_with('StarkNet Message')
        .update_with('accept_ownership')
        .update_with(get_contract_address())
        .update_with(current_owner)
        .finalize();
```

#### `[.contract-item-name]#++isValidSignature++#++(self: @ContractState, hash: felt252, signature: Array<felt252>) â†’ felt252++` [.item-kind]#external#

See [ISRC6::is_valid_signature](#`[.contract-item-name]#++is_valid_signature++#++(hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#).

#### `[.contract-item-name]#++getPublicKey++#++(self: @ContractState)++ â†’ felt252` [.item-kind]#external#

See [get_public_key](#`[.contract-item-name]#++get_public_key++#++(self:-@contractstate)++-â†’-felt252`-[.item-kind]#external#).

#### `[.contract-item-name]#++setPublicKey++#++(ref self: ContractState, newPublicKey: felt252, signature: Span<felt252>)++` [.item-kind]#external#

See [set_public_key](#`[.contract-item-name]#++set_public_key++#++(ref-self:-contractstate,-new_public_key:-felt252,-signature:-span<felt252>)++`-[.item-kind]#external#).

#### Internal functions

#### `[.contract-item-name]#++initializer++#++(ref self: ComponentState, public_key: felt252)++` [.item-kind]#internal#

Initializes the account with the given public key, and registers the `ISRC6` interface ID.

Emits an OwnerAdded event.

#### `[.contract-item-name]#++assert_only_self++#++(self: @ComponentState)++` [.item-kind]#internal#

Validates that the caller is the account itself. Otherwise it reverts.

#### `[.contract-item-name]#++assert_valid_new_owner++#++(self: @ComponentState, current_owner: felt252, new_owner: felt252, signature: Span<felt252>)++` [.item-kind]#internal#

Validates that `new_owner` accepted the ownership of the contract through a signature.

Requirements:

* `signature` must be valid for the new owner.

<Callout type='warn'>
This function assumes that `current_owner` is the current owner of the contract, and does not validate this assumption.
</Callout>

#### `[.contract-item-name]#++validate_transaction++#++(self: @ComponentState)++ â†’ felt252` [.item-kind]#internal#

Validates a transaction signature from the
[global context](https://github.com/starkware-libs/cairo/blob/main/corelib/src/starknet/info.cairo#L61).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++_set_public_key++#++(ref self: ComponentState, new_public_key: felt252)++` [.item-kind]#internal#

Set the public key without validating the caller.

Emits an OwnerAdded event.

**ðŸ”¥ CAUTION**\
The usage of this method outside the `set_public_key` function is discouraged.

#### `[.contract-item-name]#++_is_valid_signature++#++(self: @ComponentState, hash: felt252, signature: Span<felt252>)++ â†’ bool` [.item-kind]#internal#

Validates the provided `signature` for the `hash`, using the accountâ€™s current public key.

#### Events

#### `[.contract-item-name]#++OwnerAdded++#++(new_owner_guid: felt252)++` [.item-kind]#event#

Emitted when a `public_key` is added.

#### `[.contract-item-name]#++OwnerRemoved++#++(removed_owner_guid: felt252)++` [.item-kind]#event#

Emitted when a `public_key` is removed.

### `++EthAccountComponent++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/account/src/eth_account.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_account::eth_account::EthAccountComponent;
```
Account component implementing [`ISRC6`](#`++isrc6++`-link:https://github.com/openzeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/interfaces/src/account/accounts.cairo[pass:[<svg-class="icon"><use-href="#github-icon"/></svg>],role=heading-link]) for signatures over the [Secp256k1 curve](https://en.bitcoin.it/wiki/Secp256k1).

<Callout>
The `EthPublicKey` type is an alias for `starknet::secp256k1::Secp256k1Point`.
</Callout>

* [`+SRC6Impl+`](#EthAccountComponent-Embeddable-Impls-SRC6Impl)
* [`+DeclarerImpl+`](#EthAccountComponent-Embeddable-Impls-DeclarerImpl)
* [`+DeployableImpl+`](#EthAccountComponent-Embeddable-Impls-DeployableImpl)
* [`+PublicKeyImpl+`](#EthAccountComponent-Embeddable-Impls-PublicKeyImpl)
* [`+SRC6CamelOnlyImpl+`](#EthAccountComponent-Embeddable-Impls-SRC6CamelOnlyImpl)
* [`+PublicKeyCamelImpl+`](#EthAccountComponent-Embeddable-Impls-PublicKeyCamelImpl)
* [`+SRC5Impl+`](api/introspection.adoc#SRC5Component-Embeddable-Impls)

<a name="EthAccountComponent-Embeddable-Impls"></a>**Embeddable Implementations**

* xref:#EthAccountComponent-\\__execute__[`+__execute__(self, calls)+`]
* xref:#EthAccountComponent-\\__validate__[`+__validate__(self, calls)+`]
* [`+is_valid_signature(self, hash, signature)+`](#`[.contract-item-name]#++is_valid_signature++#++(self:-@contractstate,-hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#)

* xref:#EthAccountComponent-\\__validate_declare__[`+__validate_declare__(self, class_hash)+`]

* xref:#EthAccountComponent-\\__validate_deploy__[`+__validate_deploy__(self, hash, signature)+`]

* [`+get_public_key(self)+`](#`[.contract-item-name]#++get_public_key++#++(self:-@contractstate)++-â†’-ethpublickey`-[.item-kind]#external#)
* [`+set_public_key(self, new_public_key, signature)+`](#`[.contract-item-name]#++set_public_key++#++(ref-self:-contractstate,-new_public_key:-ethpublickey,-signature:-span<felt252>)++`-[.item-kind]#external#)

* [`+isValidSignature(self, hash, signature)+`](#`[.contract-item-name]#++isvalidsignature++#++(self:-@contractstate,-hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#)

* [`+getPublicKey(self)+`](#`[.contract-item-name]#++getpublickey++#++(self:-@contractstate)++-â†’-ethpublickey`-[.item-kind]#external#)
* [`+setPublicKey(self, newPublicKey, signature)+`](#`[.contract-item-name]#++setpublickey++#++(ref-self:-contractstate,-newpublickey:-ethpublickey,-signature:-span<felt252>)++`-[.item-kind]#external#)

**SRC5Impl**

* [`supports_interface(self, interface_id: felt252)`](api/introspection.adoc#ISRC5-supports_interface)

**Internal Implementations**

* [`+initializer(self, public_key)+`](#`[.contract-item-name]#++initializer++#++(ref-self:-componentstate,-public_key:-ethpublickey)++`-[.item-kind]#internal#)
* [`+assert_only_self(self)+`](#`[.contract-item-name]#++assert_only_self++#++(self:-@componentstate)++`-[.item-kind]#internal#)
* [`+assert_valid_new_owner(self, current_owner, new_owner, signature)+`](#`[.contract-item-name]#++assert_valid_new_owner++#++(self:-@componentstate,-current_owner:-ethpublickey,-new_owner:-ethpublickey,-signature:-span<felt252>)++`-[.item-kind]#internal#)
* [`+validate_transaction(self)+`](#`[.contract-item-name]#++validate_transaction++#++(self:-@componentstate)++-â†’-felt252`-[.item-kind]#internal#)
* [`+_set_public_key(self, new_public_key)+`](#`[.contract-item-name]#++_set_public_key++#++(ref-self:-componentstate,-new_public_key:-ethpublickey)++`-[.item-kind]#internal#)
* [`+_is_valid_signature(self, hash, signature)+`](#`[.contract-item-name]#++_is_valid_signature++#++(self:-@componentstate,-hash:-felt252,-signature:-span<felt252>)++-â†’-bool`-[.item-kind]#internal#)

**Events**

* [`+OwnerAdded(new_owner_guid)+`](#`[.contract-item-name]#++owneradded++#++(new_owner_guid:-felt252)++`-[.item-kind]#event#)
* [`+OwnerRemoved(removed_owner_guid)+`](#`[.contract-item-name]#++ownerremoved++#++(removed_owner_guid:-felt252)++`-[.item-kind]#event#)

#### Embeddable functions

#### `[.contract-item-name]#++__execute__++#++(self: @ContractState, calls: Array<Call>)++` [.item-kind]#external#

See xref:ISRC6-\\__execute__[ISRC6::\\__execute__].

#### `[.contract-item-name]#++__validate__++#++(self: @ContractState, calls: Array<Call>) â†’ felt252++` [.item-kind]#external#

See xref:ISRC6-\\__validate__[ISRC6::\\__validate__].

#### `[.contract-item-name]#++is_valid_signature++#++(self: @ContractState, hash: felt252, signature: Array<felt252>) â†’ felt252++` [.item-kind]#external#

See [ISRC6::is_valid_signature](#`[.contract-item-name]#++is_valid_signature++#++(hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#).

#### `[.contract-item-name]#++__validate_declare__++#++(self: @ContractState, class_hash: felt252) â†’ felt252++` [.item-kind]#external#

Validates a [`Declare` transaction](https://docs.starknet.io/architecture-and-concepts/network-architecture/transactions/#declare-transaction).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++__validate_deploy__++#++(self: @ContractState, class_hash: felt252, contract_address_salt: felt252, public_key: EthPublicKey) â†’ felt252++` [.item-kind]#external#

Validates a [`DeployAccount` transaction](https://docs.starknet.io/architecture-and-concepts/network-architecture/transactions/#deploy_account_transaction).
See [Counterfactual Deployments](/guides/deployment.adoc).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++get_public_key++#++(self: @ContractState)++ â†’ EthPublicKey` [.item-kind]#external#

Returns the current public key of the account.

#### `[.contract-item-name]#++set_public_key++#++(ref self: ContractState, new_public_key: EthPublicKey, signature: Span<felt252>)++` [.item-kind]#external#

Sets a new public key for the account. Only accessible by the account calling itself through `\\__execute__`.

Requirements:

* The caller must be the contract itself.
* The signature must be valid for the new owner.

Emits both an OwnerRemoved and an OwnerAdded event.

<Callout>

The message to be signed is computed in Cairo as follows:
```javascript
let message_hash = PoseidonTrait::new()
        .update_with('StarkNet Message')
        .update_with('accept_ownership')
        .update_with(get_contract_address())
        .update_with(current_owner.get_coordinates().unwrap_syscall())
        .finalize();
```

</Callout>

#### `[.contract-item-name]#++isValidSignature++#++(self: @ContractState, hash: felt252, signature: Array<felt252>) â†’ felt252++` [.item-kind]#external#

See [ISRC6::is_valid_signature](#`[.contract-item-name]#++is_valid_signature++#++(hash:-felt252,-signature:-array<felt252>)-â†’-felt252++`-[.item-kind]#external#).

#### `[.contract-item-name]#++getPublicKey++#++(self: @ContractState)++ â†’ EthPublicKey` [.item-kind]#external#

See [get_public_key](#`[.contract-item-name]#++get_public_key++#++(self:-@contractstate)++-â†’-ethpublickey`-[.item-kind]#external#).

#### `[.contract-item-name]#++setPublicKey++#++(ref self: ContractState, newPublicKey: EthPublicKey, signature: Span<felt252>)++` [.item-kind]#external#

See [set_public_key](#`[.contract-item-name]#++set_public_key++#++(ref-self:-contractstate,-new_public_key:-ethpublickey,-signature:-span<felt252>)++`-[.item-kind]#external#).

#### Internal functions

#### `[.contract-item-name]#++initializer++#++(ref self: ComponentState, public_key: EthPublicKey)++` [.item-kind]#internal#

Initializes the account with the given public key, and registers the `ISRC6` interface ID.

Emits an OwnerAdded event.

#### `[.contract-item-name]#++assert_only_self++#++(self: @ComponentState)++` [.item-kind]#internal#

Validates that the caller is the account itself. Otherwise it reverts.

#### `[.contract-item-name]#++assert_valid_new_owner++#++(self: @ComponentState, current_owner: EthPublicKey, new_owner: EthPublicKey, signature: Span<felt252>)++` [.item-kind]#internal#

Validates that `new_owner` accepted the ownership of the contract through a signature.

Requirements:

* The signature must be valid for the `new_owner`.

<Callout type='warn'>
This function assumes that `current_owner` is the current owner of the contract, and does not validate this assumption.
</Callout>

#### `[.contract-item-name]#++validate_transaction++#++(self: @ComponentState)++ â†’ felt252` [.item-kind]#internal#

Validates a transaction signature from the
[global context](https://github.com/starkware-libs/cairo/blob/main/corelib/src/starknet/info.cairo#L61).

Returns the short string â€™VALID'` if valid, otherwise it reverts.

#### `[.contract-item-name]#++_set_public_key++#++(ref self: ComponentState, new_public_key: EthPublicKey)++` [.item-kind]#internal#

Set the public key without validating the caller.

Emits an OwnerAdded event.

**ðŸ”¥ CAUTION**\
The usage of this method outside the `set_public_key` function is discouraged.

#### `[.contract-item-name]#++_is_valid_signature++#++(self: @ComponentState, hash: felt252, signature: Span<felt252>)++ â†’ bool` [.item-kind]#internal#

Validates the provided `signature` for the `hash`, using the accountâ€™s current public key.

#### Events

<Callout>
The `guid` is computed as the hash of the public key, using the poseidon hash function.
</Callout>

#### `[.contract-item-name]#++OwnerAdded++#++(new_owner_guid: felt252)++` [.item-kind]#event#

Emitted when a `public_key` is added.

#### `[.contract-item-name]#++OwnerRemoved++#++(removed_owner_guid: felt252)++` [.item-kind]#event#

Emitted when a `public_key` is removed.

## Extensions

### `++SRC9Component++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/account/src/extensions/src9/src9.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_account::extensions::SRC9Component;
```

OutsideExecution component implementing [`ISRC9_V2`](#`++isrc9_v2++`-link:https://github.com/openzeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/interfaces/src/account/src9.cairo[pass:[<svg-class="icon"><use-href="#github-icon"/></svg>],role=heading-link]).

<Callout>
This component is signature-agnostic, meaning it can be integrated into any account contract, as long as the
</Callout>
account implements the ISRC6 interface.

<a name="SRC9Component-Embeddable-Impls"></a>**Embeddable Implementations**

* [`+execute_from_outside_v2(self, outside_execution, signature)+`](#`[.contract-item-name]#++execute_from_outside_v2++#++(ref-self:-contractstate,-outside_execution:-outsideexecution,-signature:-span<felt252>)-â†’-array<span<felt252>>++`-[.item-kind]#external#)
* [`+is_valid_outside_execution_nonce(self, nonce)+`](#`[.contract-item-name]#++is_valid_outside_execution_nonce++#++(self:-@contractstate,-nonce:-felt252)-â†’-bool++`-[.item-kind]#external#)

**Internal Implementations**

* [`+initializer(self)+`](#`[.contract-item-name]#++initializer++#++(ref-self:-componentstate)++`-[.item-kind]#internal#)

#### Embeddable functions

#### `[.contract-item-name]#++execute_from_outside_v2++#++(ref self: ContractState, outside_execution: OutsideExecution, signature: Span<felt252>) â†’ Array<Span<felt252>>++` [.item-kind]#external#

Allows anyone to submit a transaction on behalf of the account as long as they
have the relevant signatures.

This method allows reentrancy. A call to `\\__execute__` or `execute_from_outside_v2` can
trigger another nested transaction to `execute_from_outside_v2`. This implementation
verifies that the provided `signature` matches the hash of `outside_execution` and that
`nonce` was not already used.

Arguments:

* `outside_execution` - The parameters of the transaction to execute.
* `signature` - A valid signature on the [SNIP-12](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-12.md) message encoding of
`outside_execution`.

Requirements:

* The caller must be the `outside_execution.caller` unless 'ANY_CALLER' is used.
* The current time must be within the `outside_execution.execute_after` and `outside_execution.execute_before` span.
* The `outside_execution.nonce` must not be used before.
* The `signature` must be valid.

#### `[.contract-item-name]#++is_valid_outside_execution_nonce++#++(self: @ContractState, nonce: felt252) â†’ bool++` [.item-kind]#external#

Returns the status of a given nonce. `true` if the nonce is available to use.

#### Internal functions

#### `[.contract-item-name]#++initializer++#++(ref self: ComponentState)++` [.item-kind]#internal#

Initializes the account by registering the `ISRC9_V2` interface ID.

## Presets

### `++AccountUpgradeable++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/presets/src/account.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_presets::AccountUpgradeable;
```

Upgradeable account which can change its public key and declare, deploy, or call
contracts. Supports outside execution by implementing [SRC9](#`++src9component++`-link:https://github.com/openzeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/account/src/extensions/src9/src9.cairo[pass:[<svg-class="icon"><use-href="#github-icon"/></svg>],role=heading-link]).

**presets-page**

AccountUpgradeable-class-hash

**Constructor**

* [`+constructor(self, public_key)+`](#`[.contract-item-name]#++constructor++#++(ref-self:-contractstate,-public_key:-felt252)++`-[.item-kind]#constructor#)

**Embedded Implementations**

**AccountComponent**

* [`+AccountMixinImpl+`](#AccountComponent-Embeddable-Mixin-Impl)

**SRC9Component**

* [`+OutsideExecutionV2Impl+`](#SRC9Component-Embeddable-Impls-OutsideExecutionV2Impl)

**External Functions**

* [`+upgrade(self, new_class_hash)+`](#`[.contract-item-name]#++upgrade++#++(ref-self:-contractstate,-new_class_hash:-classhash)++`-[.item-kind]#external#)

#### Constructor

#### `[.contract-item-name]#++constructor++#++(ref self: ContractState, public_key: felt252)++` [.item-kind]#constructor#

Sets the account `public_key` and registers the interfaces the contract supports.

#### External functions

#### `[.contract-item-name]#++upgrade++#++(ref self: ContractState, new_class_hash: ClassHash)++` [.item-kind]#external#

Upgrades the contract to a new implementation given by `new_class_hash`.

Requirements:

* The caller is the account contract itself.
* `new_class_hash` cannot be zero.

### `++EthAccountUpgradeable++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/presets/src/eth_account.cairo[pass:[<svg class="icon"><use href="#github-icon"/></svg>],role=heading-link]

```rust
use openzeppelin_presets::EthAccountUpgradeable;
```

Upgradeable account which can change its public key and declare, deploy, or call contracts, using Ethereum
signing keys. Supports outside execution by implementing [SRC9](#`++src9component++`-link:https://github.com/openzeppelin/cairo-contracts/blob/release-v3.0.0-alpha.0/packages/account/src/extensions/src9/src9.cairo[pass:[<svg-class="icon"><use-href="#github-icon"/></svg>],role=heading-link]).

<Callout>
The `EthPublicKey` type is an alias for `starknet::secp256k1::Secp256k1Point`.
</Callout>

**presets-page**

EthAccountUpgradeable-class-hash

**Constructor**

* [`+constructor(self, public_key)+`](#`[.contract-item-name]#++constructor++#++(ref-self:-contractstate,-public_key:-ethpublickey)++`-[.item-kind]#constructor#)

**Embedded Implementations**

**EthAccountComponent**

* [`+EthAccountMixinImpl+`](#EthAccountComponent-Embeddable-Mixin-Impl)

**SRC9Component**

* [`+OutsideExecutionV2Impl+`](#SRC9Component-Embeddable-Impls-OutsideExecutionV2Impl)

**External Functions**

* [`+upgrade(self, new_class_hash)+`](#`[.contract-item-name]#++upgrade++#++(ref-self:-contractstate,-new_class_hash:-classhash)++`-[.item-kind]#external#)

#### Constructor

#### `[.contract-item-name]#++constructor++#++(ref self: ContractState, public_key: EthPublicKey)++` [.item-kind]#constructor#

Sets the account `public_key` and registers the interfaces the contract supports.

#### External functions

#### `[.contract-item-name]#++upgrade++#++(ref self: ContractState, new_class_hash: ClassHash)++` [.item-kind]#external#

Upgrades the contract to a new implementation given by `new_class_hash`.

Requirements:

* The caller is the account contract itself.
* `new_class_hash` cannot be zero.
